<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.sist.e_learning.admin.course.AdminCourseMapper">

  <!-- 1. 강의 전체 목록 조회 -->
  <select id="selectAllCourses" resultType="kr.co.sist.e_learning.admin.course.AdminCourseDTO">
    SELECT 
      c.course_seq,
      c.title,
      u.nickname AS instructor_name,
      c.upload_date,
      c.is_public
    FROM course c
    JOIN users u ON c.user_seq = u.user_seq
    ORDER BY c.upload_date DESC
  </select>

  <!-- 2. 공개 여부 수정 -->
  <update id="updateCourseVisibility" parameterType="map">
    UPDATE course
    SET is_public = #{isPublic}
    WHERE course_seq = #{courseSeq}
  </update>

</mapper>
