<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비디오 업로드</title>
    <style>
       
    </style>
</head>
<body>
    <div class="container">
        <h2>🎬 비디오 업로드</h2>
        
        <a th:href="@{/}" class="nav-link">메인</a>
        
        <!-- 업로드 메시지 -->
        <div th:if="${msg != null}" th:text="${msg}" class="success-message"></div>

        <!-- 업로드 폼 -->
        <form id="videoUploadForm" enctype="multipart/form-data">
            
            <div class="form-group">
                <label for="title">제목:</label>
                <input type="text" id="title" name="title" required placeholder="비디오 제목을 입력하세요">
            </div>
            
            <div class="form-group">
                <label for="description">설명:</label>
                <textarea id="description" name="description" placeholder="비디오에 대한 설명을 입력하세요 (선택사항)"></textarea>
            </div>
            
            <div class="form-group">
                <label>비디오 파일 선택:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="upfile" name="upfile" accept="video/*" multiple="multiple" required>
                    <label for="upfile" class="file-input-label video-label">비디오 파일을 선택하세요</label>
                </div>
            </div>
            
<!--             <div class="form-group"> -->
<!--                 <label>썸네일 선택:</label> -->
<!--                 <div class="file-input-wrapper"> -->
<!--                     <input type="file" id="upViewfile" name="upViewfile" multiple="multiple" required> -->
<!--                     <label for="upViewfile" class="file-input-label thumbnail-label">썸네일 이미지를 선택하세요</label> -->
<!--                 </div> -->
<!--             </div> -->
			<input type="hidden" name="courseSeq" th:value="${courseSeq}"/>
            <button type="submit" class="submit-btn">업로드</button>
        </form>
    </div>

    <script>
  
      
        
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
	 $('#videoUploadForm').on('submit', function(e){
     	e.preventDefault();
     	
     	const formData = new FormData(this);
     	
     	$.ajax({
     		url:'/upload/upload_video',
     		type:'POST',
     		data:formData,
     		processData: false,
     	    contentType: false,
     	    success: function(res){
     	    	if(res.status === 'success'){
     	    		const courseSeq = res.cDTO.courseSeq;
     	    		alert(res.msg);
     	    		window.location.href = '/upload/upload_course?seq='+courseSeq;
     	    	}else{
     	    		alert(res.msg);
     	    	}
     	    },
     	    error: function(xhr, status, err){
     	    	console.error(xhr.responseText);
     	    	alert("에러 발생 : "+ err);
     	    }
     		
     	});//ajax
     	
     });//ajaxscript
	</script>
</body>
</html>